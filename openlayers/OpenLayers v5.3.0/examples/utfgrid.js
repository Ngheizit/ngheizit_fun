(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{398:function(t,e,i){"use strict";i.r(e);var n=i(3),o=i(94),r=i(2),s=i(6),a=i(62),h=i(114),c=i(17),d=i(84),l=i(26),p=i(7),u=i(11),_=i(1),f=i(160),g=i(5),v=i(51),y=i(134),m=i(55),E=i(63),b=function(s){function t(t,e,i,n,o,r){s.call(this,t,e),this.src_=i,this.extent_=n,this.preemptive_=o,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=r}return s&&(t.__proto__=s),((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.getImage=function(){return null},t.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),i=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),n=this.grid_[Math.floor((1-i)*this.grid_.length)];if("string"!=typeof n)return null;var o=n.charCodeAt(Math.floor(e*n.length));93<=o&&o--,35<=o&&o--;var r=null;if((o-=32)in this.keys_){var s=this.keys_[o];r=this.data_&&s in this.data_?this.data_[s]:s}return r},t.prototype.forDataAtCoordinate=function(e,i,n,t){this.state==c.a.IDLE&&!0===t?(Object(p.b)(this,u.a.CHANGE,function(t){i.call(n,this.getData(e))},this),this.loadInternal_()):!0===t?setTimeout(function(){i.call(n,this.getData(e))}.bind(this),0):i.call(n,this.getData(e))},t.prototype.getKey=function(){return this.src_},t.prototype.handleError_=function(){this.state=c.a.ERROR,this.changed()},t.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=c.a.EMPTY,this.changed()},t.prototype.loadInternal_=function(){if(this.state==c.a.IDLE)if(this.state=c.a.LOADING,this.jsonp_)Object(f.a)(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},t.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||200<=e.status&&e.status<300){var i;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(i)}else this.handleError_()},t.prototype.onXHRError_=function(t){this.handleError_()},t.prototype.load=function(){this.preemptive_&&this.loadInternal_()},t}(h.a),O=function(i){function t(t){if(i.call(this,{projection:Object(g.g)("EPSG:3857"),state:v.a.LOADING}),this.preemptive_=void 0===t.preemptive||t.preemptive,this.tileUrlFunction_=d.d,this.template_=void 0,this.jsonp_=t.jsonp||!1,t.url)if(this.jsonp_)Object(f.a)(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{var e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else t.tileJSON?this.handleTileJSONResponse(t.tileJSON):Object(l.a)(!1,51)}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||200<=e.status&&e.status<300){var i;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},t.prototype.onXHRError_=function(t){this.handleTileJSONError()},t.prototype.getTemplate=function(){return this.template_},t.prototype.forDataAtCoordinateAndResolution=function(t,e,i,n){if(this.tileGrid){var o=this.tileGrid.getTileCoordForCoordAndResolution(t,e);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,i,null,n)}else!0===n?setTimeout(function(){i(null)},0):i(null)},t.prototype.handleTileJSONError=function(){this.setState(v.a.ERROR)},t.prototype.handleTileJSONResponse=function(e){var t,i=Object(g.g)("EPSG:4326"),n=this.getProjection();if(void 0!==e.bounds){var o=Object(g.j)(i,n);t=Object(_.a)(e.bounds,o)}var r=e.minzoom||0,s=e.maxzoom||22,a=Object(E.b)({extent:Object(E.c)(n),maxZoom:s,minZoom:r});this.tileGrid=a,this.template_=e.template;var h=e.grids;if(h){if(this.tileUrlFunction_=Object(d.a)(h,a),void 0!==e.attribution){var l=void 0!==t?t:i.getExtent();this.setAttributions(function(t){return Object(_.F)(l,t.extent)?[e.attribution]:null})}this.setState(v.a.READY)}else this.setState(v.a.ERROR)},t.prototype.getTile=function(t,e,i,n,o){var r=Object(m.d)(t,e,i);if(this.tileCache.containsKey(r))return this.tileCache.get(r);var s=[t,e,i],a=this.getTileCoordForTileUrlFunction(s,o),h=this.tileUrlFunction_(a,n,o),l=new b(s,void 0!==h?c.a.IDLE:c.a.EMPTY,void 0!==h?h:"",this.tileGrid.getTileCoordExtent(s),this.preemptive_,this.jsonp_);return this.tileCache.set(r,l),l},t.prototype.useTile=function(t,e,i){var n=Object(m.d)(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)},t}(y.b),j="pk.eyJ1IjoiYWhvY2V2YXIiLCJhIjoiRk1kMWZaSSJ9.E5BkluenyWQMsBLsuByrmg",R=new s.a({source:new a.a({url:"https://api.tiles.mapbox.com/v4/mapbox.geography-class.json?secure&access_token="+j})}),T=new O({url:"https://api.tiles.mapbox.com/v4/mapbox.geography-class.json?secure&access_token="+j}),L=new s.a({source:T}),S=new r.a({center:[0,0],zoom:1}),x=document.getElementById("map"),J=new n.a({layers:[R,L],target:x,view:S}),w=document.getElementById("country-info"),C=document.getElementById("country-flag"),I=document.getElementById("country-name"),N=new o.a({element:w,offset:[15,15],stopEvent:!1});J.addOverlay(N);var k=function(e){var t=S.getResolution();T.forDataAtCoordinateAndResolution(e,t,function(t){x.style.cursor=t?"pointer":"",t&&(C.src="data:image/png;base64,"+t.flag_png,I.innerHTML=t.admin),N.setPosition(t?e:void 0)})};J.on("pointermove",function(t){if(!t.dragging){var e=J.getEventCoordinate(t.originalEvent);k(e)}}),J.on("click",function(t){k(t.coordinate)})}},[[398,0]]]);
//# sourceMappingURL=utfgrid.js.map