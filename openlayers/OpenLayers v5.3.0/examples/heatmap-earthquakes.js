(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{395:function(t,e,a){"use strict";a.r(e);var i=a(3),n=a(2),r=a(105),h=a(7),o=a(32),s=a(28),d=a(22),u=a(19),l=a(13),c=a(65),g=a(100),p=a(16),f="blur",w="gradient",_="radius",y=["#00f","#0ff","#0f0","#ff0","#f00"];var b=function(n){function t(t){var e=t||{},a=Object(l.a)({},e);delete a.gradient,delete a.radius,delete a.blur,delete a.shadow,delete a.weight,n.call(this,a),this.gradient_=null,this.shadow_=void 0!==e.shadow?e.shadow:250,this.circleImage_=void 0,this.styleCache_=null,Object(h.a)(this,Object(o.b)(w),this.handleGradientChanged_,this),this.setGradient(e.gradient?e.gradient:y),this.setBlur(void 0!==e.blur?e.blur:15),this.setRadius(void 0!==e.radius?e.radius:8),Object(h.a)(this,Object(o.b)(f),this.handleStyleChanged_,this),Object(h.a)(this,Object(o.b)(_),this.handleStyleChanged_,this),this.handleStyleChanged_();var s,i=e.weight?e.weight:"weight";s="string"==typeof i?function(t){return t.get(i)}:i,this.setStyle(function(t,e){var a=s(t),i=void 0!==a?Object(u.a)(a,0,1):1,n=255*i|0,r=this.styleCache_[n];return r||(r=[new p.c({image:new g.a({opacity:i,src:this.circleImage_})})],this.styleCache_[n]=r),r}.bind(this)),this.setRenderOrder(null),Object(h.a)(this,c.a.RENDER,this.handleRender_,this)}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.createCircle_=function(){var t=this.getRadius(),e=this.getBlur(),a=t+e+1,i=2*a,n=Object(s.a)(i,i);n.shadowOffsetX=n.shadowOffsetY=this.shadow_,n.shadowBlur=e,n.shadowColor="#000",n.beginPath();var r=a-this.shadow_;return n.arc(r,r,t,0,2*Math.PI,!0),n.fill(),n.canvas.toDataURL()},t.prototype.getBlur=function(){return this.get(f)},t.prototype.getGradient=function(){return this.get(w)},t.prototype.getRadius=function(){return this.get(_)},t.prototype.handleGradientChanged_=function(){this.gradient_=function(t){for(var e=Object(s.a)(1,256),a=e.createLinearGradient(0,0,1,256),i=1/(t.length-1),n=0,r=t.length;n<r;++n)a.addColorStop(n*i,t[n]);return e.fillStyle=a,e.fillRect(0,0,1,256),e.getImageData(0,0,1,256).data}(this.getGradient())},t.prototype.handleStyleChanged_=function(){this.circleImage_=this.createCircle_(),this.styleCache_=new Array(256),this.changed()},t.prototype.handleRender_=function(t){for(var e=t.context,a=e.canvas,i=e.getImageData(0,0,a.width,a.height),n=i.data,r=0,s=n.length;r<s;r+=4){var h=4*n[r+3];h&&(n[r]=this.gradient_[h],n[r+1]=this.gradient_[h+1],n[r+2]=this.gradient_[h+2])}e.putImageData(i,0,0)},t.prototype.setBlur=function(t){this.set(f,t)},t.prototype.setGradient=function(t){this.set(w,t)},t.prototype.setRadius=function(t){this.set(_,t)},t}(d.a),v=a(6),m=a(83),O=a(15),C=document.getElementById("blur"),I=document.getElementById("radius"),j=new b({source:new O.a({url:"data/kml/2012_Earthquakes_Mag5.kml",format:new r.a({extractStyles:!1})}),blur:parseInt(C.value,10),radius:parseInt(I.value,10)});j.getSource().on("addfeature",function(t){var e=t.feature.get("name"),a=parseFloat(e.substr(2));t.feature.set("weight",a-5)});var R=new v.a({source:new m.a({layer:"toner"})});new i.a({layers:[R,j],target:"map",view:new n.a({center:[0,0],zoom:2})});C.addEventListener("input",function(){j.setBlur(parseInt(C.value,10))}),I.addEventListener("input",function(){j.setRadius(parseInt(I.value,10))})}},[[395,0]]]);
//# sourceMappingURL=heatmap-earthquakes.js.map