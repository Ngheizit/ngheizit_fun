{"version":3,"sources":["webpack:///./custom-interactions.js"],"names":["__webpack_require__","r","__webpack_exports__","_src_ol_Feature_js__WEBPACK_IMPORTED_MODULE_0__","_src_ol_Map_js__WEBPACK_IMPORTED_MODULE_1__","_src_ol_View_js__WEBPACK_IMPORTED_MODULE_2__","_src_ol_geom_js__WEBPACK_IMPORTED_MODULE_3__","_src_ol_geom_js__WEBPACK_IMPORTED_MODULE_4__","_src_ol_geom_js__WEBPACK_IMPORTED_MODULE_5__","_src_ol_interaction_js__WEBPACK_IMPORTED_MODULE_6__","_src_ol_interaction_js__WEBPACK_IMPORTED_MODULE_7__","_src_ol_layer_js__WEBPACK_IMPORTED_MODULE_8__","_src_ol_layer_js__WEBPACK_IMPORTED_MODULE_9__","_src_ol_source_js__WEBPACK_IMPORTED_MODULE_10__","_src_ol_source_js__WEBPACK_IMPORTED_MODULE_11__","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_12__","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_13__","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_14__","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_15__","Drag","PointerInteraction","super","this","handleDownEvent","handleDragEvent","handleMoveEvent","handleUpEvent","coordinate_","cursor_","feature_","previousCursor_","undefined","constructor","evt","const","feature","map","forEachFeatureAtPixel","pixel","coordinate","deltaX","deltaY","getGeometry","translate","element","getTargetElement","style","cursor","pointFeature","lineFeature","polygonFeature","interactions","Object","extend","layers","source","url","features","image","anchor","anchorXUnits","anchorYUnits","opacity","src","stroke","width","color","fill","target","view","center","zoom"],"mappings":"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","file":"custom-interactions.js","sourcesContent":["import Feature from '../src/ol/Feature.js';\nimport Map from '../src/ol/Map.js';\nimport View from '../src/ol/View.js';\nimport {LineString, Point, Polygon} from '../src/ol/geom.js';\nimport {defaults as defaultInteractions, Pointer as PointerInteraction} from '../src/ol/interaction.js';\nimport {Tile as TileLayer, Vector as VectorLayer} from '../src/ol/layer.js';\nimport {TileJSON, Vector as VectorSource} from '../src/ol/source.js';\nimport {Fill, Icon, Stroke, Style} from '../src/ol/style.js';\n\n\n/**\n * @constructor\n * @extends {module:ol/interaction/Pointer}\n */\nclass Drag extends PointerInteraction {\n  constructor() {\n    super({\n      handleDownEvent: handleDownEvent,\n      handleDragEvent: handleDragEvent,\n      handleMoveEvent: handleMoveEvent,\n      handleUpEvent: handleUpEvent\n    });\n\n    /**\n     * @type {module:ol/pixel~Pixel}\n     * @private\n     */\n    this.coordinate_ = null;\n\n    /**\n     * @type {string|undefined}\n     * @private\n     */\n    this.cursor_ = 'pointer';\n\n    /**\n     * @type {module:ol/Feature~Feature}\n     * @private\n     */\n    this.feature_ = null;\n\n    /**\n     * @type {string|undefined}\n     * @private\n     */\n    this.previousCursor_ = undefined;\n  }\n}\n\n\n/**\n * @param {module:ol/MapBrowserEvent~MapBrowserEvent} evt Map browser event.\n * @return {boolean} `true` to start the drag sequence.\n */\nfunction handleDownEvent(evt) {\n  const map = evt.map;\n\n  const feature = map.forEachFeatureAtPixel(evt.pixel,\n    function(feature) {\n      return feature;\n    });\n\n  if (feature) {\n    this.coordinate_ = evt.coordinate;\n    this.feature_ = feature;\n  }\n\n  return !!feature;\n}\n\n\n/**\n * @param {module:ol/MapBrowserEvent~MapBrowserEvent} evt Map browser event.\n */\nfunction handleDragEvent(evt) {\n  const deltaX = evt.coordinate[0] - this.coordinate_[0];\n  const deltaY = evt.coordinate[1] - this.coordinate_[1];\n\n  const geometry = this.feature_.getGeometry();\n  geometry.translate(deltaX, deltaY);\n\n  this.coordinate_[0] = evt.coordinate[0];\n  this.coordinate_[1] = evt.coordinate[1];\n}\n\n\n/**\n * @param {module:ol/MapBrowserEvent~MapBrowserEvent} evt Event.\n */\nfunction handleMoveEvent(evt) {\n  if (this.cursor_) {\n    const map = evt.map;\n    const feature = map.forEachFeatureAtPixel(evt.pixel,\n      function(feature) {\n        return feature;\n      });\n    const element = evt.map.getTargetElement();\n    if (feature) {\n      if (element.style.cursor != this.cursor_) {\n        this.previousCursor_ = element.style.cursor;\n        element.style.cursor = this.cursor_;\n      }\n    } else if (this.previousCursor_ !== undefined) {\n      element.style.cursor = this.previousCursor_;\n      this.previousCursor_ = undefined;\n    }\n  }\n}\n\n\n/**\n * @return {boolean} `false` to stop the drag sequence.\n */\nfunction handleUpEvent() {\n  this.coordinate_ = null;\n  this.feature_ = null;\n  return false;\n}\n\n\nconst pointFeature = new Feature(new Point([0, 0]));\n\nconst lineFeature = new Feature(\n  new LineString([[-1e7, 1e6], [-1e6, 3e6]]));\n\nconst polygonFeature = new Feature(\n  new Polygon([[[-3e6, -1e6], [-3e6, 1e6],\n    [-1e6, 1e6], [-1e6, -1e6], [-3e6, -1e6]]]));\n\n\nconst map = new Map({\n  interactions: defaultInteractions().extend([new Drag()]),\n  layers: [\n    new TileLayer({\n      source: new TileJSON({\n        url: 'https://api.tiles.mapbox.com/v3/mapbox.geography-class.json?secure'\n      })\n    }),\n    new VectorLayer({\n      source: new VectorSource({\n        features: [pointFeature, lineFeature, polygonFeature]\n      }),\n      style: new Style({\n        image: new Icon(/** @type {module:ol/style/Icon~Options} */ ({\n          anchor: [0.5, 46],\n          anchorXUnits: 'fraction',\n          anchorYUnits: 'pixels',\n          opacity: 0.95,\n          src: 'data/icon.png'\n        })),\n        stroke: new Stroke({\n          width: 3,\n          color: [255, 0, 0, 1]\n        }),\n        fill: new Fill({\n          color: [0, 0, 255, 0.6]\n        })\n      })\n    })\n  ],\n  target: 'map',\n  view: new View({\n    center: [0, 0],\n    zoom: 2\n  })\n});\n"],"sourceRoot":""}