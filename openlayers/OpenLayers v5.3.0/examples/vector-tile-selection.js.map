{"version":3,"sources":["webpack:///./vector-tile-selection.js"],"names":["__webpack_require__","r","__webpack_exports__","_src_ol_Map_js__WEBPACK_IMPORTED_MODULE_0__","_src_ol_View_js__WEBPACK_IMPORTED_MODULE_1__","_src_ol_format_MVT_js__WEBPACK_IMPORTED_MODULE_2__","_src_ol_layer_VectorTile_js__WEBPACK_IMPORTED_MODULE_3__","_src_ol_source_VectorTile_js__WEBPACK_IMPORTED_MODULE_4__","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_5__","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_6__","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_7__","selection","idProp","vtLayer","declutter","source","format","url","style","feature","const","selected","get","stroke","color","width","fill","map","layers","target","view","center","zoom","selectElement","document","getElementById","on","event","features","getFeaturesAtPixel","pixel","setStyle","getStyle","fid","value"],"mappings":"4FAAAA,EAAAC,EAAAC,GAAA,IAAAC,EAAAH,EAAA,GAAAI,EAAAJ,EAAA,GAAAK,EAAAL,EAAA,KAAAM,EAAAN,EAAA,KAAAO,EAAAP,EAAA,KAAAQ,EAAAR,EAAA,IAAAS,EAAAT,EAAA,IAAAU,EAAAV,EAAA,IAQIW,EAAY,GAEVC,EAAS,SAETC,EAAU,IAAIP,EAAA,EAAgB,CAClCQ,WAAW,EACXC,OAAQ,IAAIR,EAAA,EAAiB,CAC3BS,OAAQ,IAAIX,EAAA,EACZY,IAAK,wHAGPC,MAAO,SAASC,GACdC,IAAMC,IAAaV,EAAUQ,EAAQG,IAAIV,IACzC,OAAO,IAAIJ,EAAA,EAAM,CACfe,OAAQ,IAAId,EAAA,EAAO,CACjBe,MAAOH,EAAW,sBAAwB,OAC1CI,MAAOJ,EAAW,EAAI,IAExBK,KAAM,IAAIhB,EAAA,EAAK,CACbc,MAAOH,EAAW,sBAAwB,4BAM5CM,EAAM,IAAIxB,EAAA,EAAI,CAClByB,OAAQ,CACNf,GAEFgB,OAAQ,MACRC,KAAM,IAAI1B,EAAA,EAAK,CACb2B,OAAQ,CAAC,EAAG,GACZC,KAAM,MAIJC,EAAgBC,SAASC,eAAe,QAE9CR,EAAIS,GAAG,QAAS,SAASC,GACvBjB,IAAMkB,EAAWX,EAAIY,mBAAmBF,EAAMG,OAC9C,IAAKF,EAIH,OAHA3B,EAAY,QAEZE,EAAQ4B,SAAS5B,EAAQ6B,YAG3BtB,IAAMD,EAAUmB,EAAS,GACnBK,EAAMxB,EAAQG,IAAIV,GAEI,iBAAxBqB,EAAcW,QAChBjC,EAAY,IAGdA,EAAUgC,GAAOxB,EAGjBN,EAAQ4B,SAAS5B,EAAQ6B","file":"vector-tile-selection.js","sourcesContent":["import Map from '../src/ol/Map.js';\nimport View from '../src/ol/View.js';\nimport MVT from '../src/ol/format/MVT.js';\nimport VectorTileLayer from '../src/ol/layer/VectorTile.js';\nimport VectorTileSource from '../src/ol/source/VectorTile.js';\nimport {Fill, Stroke, Style} from '../src/ol/style.js';\n\n// lookup for selection objects\nlet selection = {};\n// feature property to act as identifier\nconst idProp = 'iso_a3';\n\nconst vtLayer = new VectorTileLayer({\n  declutter: true,\n  source: new VectorTileSource({\n    format: new MVT(),\n    url: 'https://ahocevar.com/geoserver/gwc/service/tms/1.0.0/' +\n      'ne:ne_10m_admin_0_countries@EPSG%3A900913@pbf/{z}/{x}/{-y}.pbf'\n  }),\n  style: function(feature) {\n    const selected = !!selection[feature.get(idProp)];\n    return new Style({\n      stroke: new Stroke({\n        color: selected ? 'rgba(200,20,20,0.8)' : 'gray',\n        width: selected ? 2 : 1\n      }),\n      fill: new Fill({\n        color: selected ? 'rgba(200,20,20,0.2)' : 'rgba(20,20,20,0.9)'\n      })\n    });\n  }\n});\n\nconst map = new Map({\n  layers: [\n    vtLayer\n  ],\n  target: 'map',\n  view: new View({\n    center: [0, 0],\n    zoom: 2\n  })\n});\n\nconst selectElement = document.getElementById('type');\n\nmap.on('click', function(event) {\n  const features = map.getFeaturesAtPixel(event.pixel);\n  if (!features) {\n    selection = {};\n    // force redraw of layer style\n    vtLayer.setStyle(vtLayer.getStyle());\n    return;\n  }\n  const feature = features[0];\n  const fid = feature.get(idProp);\n\n  if (selectElement.value === 'singleselect') {\n    selection = {};\n  }\n  // add selected feature to lookup\n  selection[fid] = feature;\n\n  // force redraw of layer style\n  vtLayer.setStyle(vtLayer.getStyle());\n});\n"],"sourceRoot":""}