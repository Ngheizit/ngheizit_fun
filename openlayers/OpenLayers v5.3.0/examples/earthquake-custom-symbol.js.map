{"version":3,"sources":["webpack:///./earthquake-custom-symbol.js"],"names":["__webpack_require__","r","__webpack_exports__","scale","_src_ol_Map_js__WEBPACK_IMPORTED_MODULE_0__","_src_ol_View_js__WEBPACK_IMPORTED_MODULE_1__","_src_ol_format_KML_js__WEBPACK_IMPORTED_MODULE_2__","_src_ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_3__","_src_ol_layer_js__WEBPACK_IMPORTED_MODULE_4__","_src_ol_layer_js__WEBPACK_IMPORTED_MODULE_5__","_src_ol_render_js__WEBPACK_IMPORTED_MODULE_6__","_src_ol_source_Stamen_js__WEBPACK_IMPORTED_MODULE_7__","_src_ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_8__","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_9__","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_10__","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_11__","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_12__","symbol","scaleFunction","coordinate","styleCache","vector","source","url","format","extractStyles","style","feature","const","name","get","magnitude","parseFloat","substr","size","parseInt","let","canvas","document","createElement","vectorContext","Object","getContext","pixelRatio","setStyle","fill","color","stroke","width","drawGeometry","map","image","img","imgSize","rotation","raster","layer","layers","target","view","center","zoom"],"mappings":"2FAAAA,EAAAC,EAAAC,GAAA,IAYIC,EAZJC,EAAAJ,EAAA,GAAAK,EAAAL,EAAA,GAAAM,EAAAN,EAAA,KAAAO,EAAAP,EAAA,IAAAQ,EAAAR,EAAA,IAAAS,EAAAT,EAAA,GAAAU,EAAAV,EAAA,KAAAW,EAAAX,EAAA,IAAAY,EAAAZ,EAAA,IAAAa,EAAAb,EAAA,IAAAc,EAAAd,EAAA,IAAAe,EAAAf,EAAA,IAAAgB,EAAAhB,EAAA,KAWMiB,EAAS,CAAC,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,GAAI,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,IAE/DC,EAAgB,SAASC,GAC7B,MAAO,CAACA,EAAW,GAAKhB,EAAOgB,EAAW,GAAKhB,IAG3CiB,EAAa,GAgCbC,EAAS,IAAIb,EAAA,EAAY,CAC7Bc,OAAQ,IAAIV,EAAA,EAAa,CACvBW,IAAK,qCACLC,OAAQ,IAAIlB,EAAA,EAAI,CACdmB,eAAe,MAGnBC,MAtCoB,SAASC,GAI7BC,IAAMC,EAAOF,EAAQG,IAAI,QACnBC,EAAYC,WAAWH,EAAKI,OAAO,IACnCC,EAAOC,SAAS,GAAK,IAAMJ,EAAY,GAAI,IACjD5B,EAAQ+B,EAAO,GACfE,IAAIV,EAAQN,EAAWc,GACvB,IAAKR,EAAO,CACVE,IAAMS,EAA2CC,SAASC,cAAc,UAClEC,EAAgBC,OAAA/B,EAAA,EAAA+B,CACqBJ,EAAOK,WAAW,MAC3D,CAACR,KAAM,CAACA,EAAMA,GAAOS,WAAY,IACnCH,EAAcI,SAAS,IAAI/B,EAAA,EAAM,CAC/BgC,KAAM,IAAI/B,EAAA,EAAK,CAACgC,MAAO,2BACvBC,OAAQ,IAAIhC,EAAA,EAAO,CAAC+B,MAAO,yBAA0BE,MAAO,OAE9DR,EAAcS,aAAa,IAAI1C,EAAA,EAAQ,CAACU,EAAOiC,IAAIhC,MACnDQ,EAAQ,IAAIb,EAAA,EAAM,CAChBsC,MAAO,IAAInC,EAAA,EAAK,CACdoC,IAAKf,EACLgB,QAAS,CAACnB,EAAMA,GAChBoB,SAAU,QAGdlC,EAAWc,GAAQR,EAErB,OAAOA,KAaH6B,EAAS,IAAI9C,EAAA,EAAU,CAC3Ba,OAAQ,IAAIX,EAAA,EAAO,CACjB6C,MAAO,YAIC,IAAIpD,EAAA,EAAI,CAClBqD,OAAQ,CAACF,EAAQlC,GACjBqC,OAAQ,MACRC,KAAM,IAAItD,EAAA,EAAK,CACbuD,OAAQ,CAAC,EAAG,GACZC,KAAM","file":"earthquake-custom-symbol.js","sourcesContent":["import Map from '../src/ol/Map.js';\nimport View from '../src/ol/View.js';\nimport KML from '../src/ol/format/KML.js';\nimport Polygon from '../src/ol/geom/Polygon.js';\nimport {Tile as TileLayer, Vector as VectorLayer} from '../src/ol/layer.js';\nimport {toContext} from '../src/ol/render.js';\nimport Stamen from '../src/ol/source/Stamen.js';\nimport VectorSource from '../src/ol/source/Vector.js';\nimport {Fill, Icon, Stroke, Style} from '../src/ol/style.js';\n\n\nconst symbol = [[0, 0], [4, 2], [6, 0], [10, 5], [6, 3], [4, 5], [0, 0]];\nlet scale;\nconst scaleFunction = function(coordinate) {\n  return [coordinate[0] * scale, coordinate[1] * scale];\n};\n\nconst styleCache = {};\nconst styleFunction = function(feature) {\n  // 2012_Earthquakes_Mag5.kml stores the magnitude of each earthquake in a\n  // standards-violating <magnitude> tag in each Placemark.  We extract it from\n  // the Placemark's name instead.\n  const name = feature.get('name');\n  const magnitude = parseFloat(name.substr(2));\n  const size = parseInt(10 + 40 * (magnitude - 5), 10);\n  scale = size / 10;\n  let style = styleCache[size];\n  if (!style) {\n    const canvas = /** @type {HTMLCanvasElement} */ (document.createElement('canvas'));\n    const vectorContext = toContext(\n      /** @type {CanvasRenderingContext2D} */ (canvas.getContext('2d')),\n      {size: [size, size], pixelRatio: 1});\n    vectorContext.setStyle(new Style({\n      fill: new Fill({color: 'rgba(255, 153, 0, 0.4)'}),\n      stroke: new Stroke({color: 'rgba(255, 204, 0, 0.2)', width: 2})\n    }));\n    vectorContext.drawGeometry(new Polygon([symbol.map(scaleFunction)]));\n    style = new Style({\n      image: new Icon({\n        img: canvas,\n        imgSize: [size, size],\n        rotation: 1.2\n      })\n    });\n    styleCache[size] = style;\n  }\n  return style;\n};\n\nconst vector = new VectorLayer({\n  source: new VectorSource({\n    url: 'data/kml/2012_Earthquakes_Mag5.kml',\n    format: new KML({\n      extractStyles: false\n    })\n  }),\n  style: styleFunction\n});\n\nconst raster = new TileLayer({\n  source: new Stamen({\n    layer: 'toner'\n  })\n});\n\nconst map = new Map({\n  layers: [raster, vector],\n  target: 'map',\n  view: new View({\n    center: [0, 0],\n    zoom: 2\n  })\n});\n"],"sourceRoot":""}