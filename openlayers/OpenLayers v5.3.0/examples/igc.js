(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{283:function(e,t,n){"use strict";n.r(t);var r=n(23),a=n(3),o=n(2),i=n(218),s=n(27),c=n(31),l=n(6),u=n(22),d=n(12),g=n(15),w=n(16),m=n(20),p=n(47),v=n(25),f={"Clement Latour":"rgba(0, 0, 255, 0.7)","Damien de Baesnt":"rgba(0, 215, 255, 0.7)","Sylvain Dhonneur":"rgba(0, 165, 255, 0.7)","Tom Payne":"rgba(0, 255, 255, 0.7)","Ulrich Prinz":"rgba(0, 215, 255, 0.7)"},h={},y=new g.a,b=["data/igc/Clement-Latour.igc","data/igc/Damien-de-Baenst.igc","data/igc/Sylvain-Dhonneur.igc","data/igc/Tom-Payne.igc","data/igc/Ulrich-Prinz.igc"];function C(e,t){var n=new XMLHttpRequest;n.open("GET",e),n.onload=function(){t(n.responseText)},n.send()}for(var T=new i.a,L=0;L<b.length;++L)C(b[L],function(e){var t=T.readFeatures(e,{featureProjection:"EPSG:3857"});y.addFeatures(t)});var P={start:1/0,stop:-1/0,duration:0};y.on("addfeature",function(e){var t=e.feature.getGeometry();P.start=Math.min(P.start,t.getFirstCoordinate()[2]),P.stop=Math.max(P.stop,t.getLastCoordinate()[2]),P.duration=P.stop-P.start});var E=new a.a({layers:[new l.a({source:new d.b({attributions:['All maps Â© <a href="https://www.opencyclemap.org/">OpenCycleMap</a>',d.a],url:"https://{a-c}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png?apikey=0e6fc415256d4fbb9b5166a718591d71"})}),new u.a({source:y,style:function(e){var t=f[e.get("PLT")],n=h[t];return n||(n=new w.c({stroke:new m.a({color:t,width:3})}),h[t]=n),n}})],target:"map",view:new o.a({center:[703365.7089403362,5714629.865071137],zoom:9})}),G=null,k=null,M=function(e){var t=y.getClosestFeatureToCoordinate(e),n=document.getElementById("info");if(null===t)k=G=null,n.innerHTML="&nbsp;";else{var a=t.getGeometry().getClosestPoint(e);null===G?G=new s.a(a):G.setCoordinates(a);var r=new Date(1e3*a[2]);n.innerHTML=t.get("PLT")+" ("+r.toUTCString()+")";var o=[e,[a[0],a[1]]];null===k?k=new c.a(o):k.setCoordinates(o)}E.render()};E.on("pointermove",function(e){if(!e.dragging){var t=E.getEventCoordinate(e.originalEvent);M(t)}}),E.on("click",function(e){M(e.coordinate)});var F=new m.a({color:"rgba(255,0,0,0.9)",width:1}),S=new w.c({stroke:F,image:new p.a({radius:5,fill:null,stroke:F})});E.on("postcompose",function(e){var t=e.vectorContext;t.setStyle(S),null!==G&&t.drawGeometry(G),null!==k&&t.drawGeometry(k)});var D=new u.a({source:new g.a,map:E,style:new w.c({image:new p.a({radius:5,fill:new v.a({color:"rgba(255,0,0,0.9)"})})})});document.getElementById("time").addEventListener("input",function(){var e=parseInt(this.value,10)/100,a=P.start+P.duration*e;y.forEachFeature(function(e){var t=e.getGeometry().getCoordinateAtM(a,!0),n=e.get("highlight");void 0===n?(n=new r.a(new s.a(t)),e.set("highlight",n),D.getSource().addFeature(n)):n.getGeometry().setCoordinates(t)}),E.render()})}},[[283,0]]]);
//# sourceMappingURL=igc.js.map