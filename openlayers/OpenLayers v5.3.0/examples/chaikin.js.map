{"version":3,"sources":["webpack:///../node_modules/chaikin-smooth/index.js","webpack:///./chaikin.js","webpack:///../node_modules/vec2-copy/index.js"],"names":["copy","__webpack_require__","module","exports","input","output","Array","isArray","length","push","i","p0","p1","p0x","p0y","p1x","p1y","Q","R","r","__webpack_exports__","_src_ol_Map_js__WEBPACK_IMPORTED_MODULE_0__","_src_ol_View_js__WEBPACK_IMPORTED_MODULE_1__","_src_ol_layer_js__WEBPACK_IMPORTED_MODULE_2__","_src_ol_layer_js__WEBPACK_IMPORTED_MODULE_3__","_src_ol_source_js__WEBPACK_IMPORTED_MODULE_4__","_src_ol_source_js__WEBPACK_IMPORTED_MODULE_5__","_src_ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_6__","chaikin_smooth__WEBPACK_IMPORTED_MODULE_7__","chaikin_smooth__WEBPACK_IMPORTED_MODULE_7___default","n","const","vectorSource","map","layers","source","opacity","target","view","center","zoom","shallSmoothen","document","getElementById","numIterations","draw","type","addInteraction","on","event","checked","geometry","feature","getGeometry","smoothened","path","Math","min","max","makeSmooth","getCoordinates","parseInt","value","setCoordinates","out","a"],"mappings":"8EAAA,IAAAA,EAAWC,EAAQ,KAEnBC,EAAAC,QAAA,SAAAC,EAAAC,GACAC,MAAAC,QAAAF,KACAA,EAAA,IAEA,EAAAD,EAAAI,QACAH,EAAAI,KAAAT,EAAA,MAAAI,EAAA,KACA,QAAAM,EAAA,EAAiBA,EAAAN,EAAAI,OAAA,EAAkBE,IAAA,CACnC,IAAAC,EAAAP,EAAAM,GACAE,EAAAR,EAAAM,EAAA,GACAG,EAAAF,EAAA,GACAG,EAAAH,EAAA,GACAI,EAAAH,EAAA,GACAI,EAAAJ,EAAA,GAEAK,EAAA,KAAAJ,EAAA,IAAAE,EAAA,IAAAD,EAAA,IAAAE,GACAE,EAAA,KAAAL,EAAA,IAAAE,EAAA,IAAAD,EAAA,IAAAE,GACAX,EAAAI,KAAAQ,GACAZ,EAAAI,KAAAS,GAIA,OAFA,EAAAd,EAAAI,QACAH,EAAAI,KAAAT,EAAA,MAAAI,IAAAI,OAAA,KACAH,qCCvBAJ,EAAAkB,EAAAC,GAAA,IAAAC,EAAApB,EAAA,GAAAqB,EAAArB,EAAA,GAAAsB,EAAAtB,EAAA,GAAAuB,EAAAvB,EAAA,IAAAwB,EAAAxB,EAAA,IAAAyB,EAAAzB,EAAA,IAAA0B,EAAA1B,EAAA,IAAA2B,EAAA3B,EAAA,KAAA4B,EAAA5B,EAAA6B,EAAAF,GAiBAG,IAAMC,EAAe,IAAIP,EAAA,EAAa,IAEhCQ,EAAM,IAAIZ,EAAA,EAAI,CAClBa,OAAQ,CACN,IAAIX,EAAA,EAAU,CACZY,OAAQ,IAAIT,EAAA,EACZU,QAAS,KAEX,IAAIZ,EAAA,EAAY,CACdW,OAAQH,KAGZK,OAAQ,MACRC,KAAM,IAAIhB,EAAA,EAAK,CACbiB,OAAQ,CAAC,YAAc,aACvBC,KAAM,MAIJC,EAAgBC,SAASC,eAAe,kBACxCC,EAAgBF,SAASC,eAAe,cAExCE,EAAO,IAAIlB,EAAA,EAAK,CACpBQ,OAAQH,EACRc,KAAM,eAERb,EAAIc,eAAeF,GACnBA,EAAKG,GAAG,UAAW,SAASC,GAC1B,GAAKR,EAAcS,QAAnB,CAGAnB,IACMoB,EADOF,EAAMG,QACGC,cAEhBC,EA3CR,SAAoBC,EAAMX,GAExB,IADAA,EAAgBY,KAAKC,IAAID,KAAKE,IAAId,EAAe,GAAI,IAC9B,EAAhBA,GACLW,EAAO1B,IAAO0B,GACdX,IAEF,OAAOW,EAqCYI,CADJR,EAASS,iBACcC,SAASjB,EAAckB,MAAO,KAAO,GAC3EX,EAASY,eAAeT,yBCpD1BpD,EAAAC,QAAA,SAAA6D,EAAAC,GAGA,OAFAD,EAAA,GAAAC,EAAA,GACAD,EAAA,GAAAC,EAAA,GACAD","file":"chaikin.js","sourcesContent":["var copy = require('vec2-copy')\n\nmodule.exports = function(input, output) {\n    if (!Array.isArray(output))\n        output = []\n\n    if (input.length>0)\n        output.push(copy([0, 0], input[0]))\n    for (var i=0; i<input.length-1; i++) {\n        var p0 = input[i]\n        var p1 = input[i+1]\n        var p0x = p0[0],\n            p0y = p0[1],\n            p1x = p1[0],\n            p1y = p1[1]\n\n        var Q = [ 0.75 * p0x + 0.25 * p1x, 0.75 * p0y + 0.25 * p1y ]\n        var R = [ 0.25 * p0x + 0.75 * p1x, 0.25 * p0y + 0.75 * p1y ]\n        output.push(Q)\n        output.push(R)\n    }\n    if (input.length > 1)\n        output.push(copy([0, 0], input[ input.length-1 ]))\n    return output\n}","import Map from '../src/ol/Map.js';\nimport View from '../src/ol/View.js';\nimport {Tile as TileLayer, Vector as VectorLayer} from '../src/ol/layer.js';\nimport {OSM, Vector as VectorSource} from '../src/ol/source.js';\nimport Draw from '../src/ol/interaction/Draw.js';\n\nimport smooth from 'chaikin-smooth';\n\nfunction makeSmooth(path, numIterations) {\n  numIterations = Math.min(Math.max(numIterations, 1), 10);\n  while (numIterations > 0) {\n    path = smooth(path);\n    numIterations--;\n  }\n  return path;\n}\n\nconst vectorSource = new VectorSource({});\n\nconst map = new Map({\n  layers: [\n    new TileLayer({\n      source: new OSM(),\n      opacity: 0.5\n    }),\n    new VectorLayer({\n      source: vectorSource\n    })\n  ],\n  target: 'map',\n  view: new View({\n    center: [1078373.5950, 6871994.5910],\n    zoom: 5\n  })\n});\n\nconst shallSmoothen = document.getElementById('shall-smoothen');\nconst numIterations = document.getElementById('iterations');\n\nconst draw = new Draw({\n  source: vectorSource,\n  type: 'LineString'\n});\nmap.addInteraction(draw);\ndraw.on('drawend', function(event) {\n  if (!shallSmoothen.checked) {\n    return;\n  }\n  const feat = event.feature;\n  const geometry = feat.getGeometry();\n  const coords = geometry.getCoordinates();\n  const smoothened = makeSmooth(coords, parseInt(numIterations.value, 10) || 5);\n  geometry.setCoordinates(smoothened);\n});\n","module.exports = function vec2Copy(out, a) {\n    out[0] = a[0]\n    out[1] = a[1]\n    return out\n}"],"sourceRoot":""}