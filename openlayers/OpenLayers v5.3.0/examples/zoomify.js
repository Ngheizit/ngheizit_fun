(window.webpackJsonp=window.webpackJsonp||[]).push([[166],{399:function(e,t,i){"use strict";i.r(t);var r=i(3),o=i(2),n=i(6),O=i(133),a=i(168),s=i(17),_=i(84),I=i(26),u=i(28),j=i(1),l=i(57),c=i(93),S=i(110),T="default",x="truncated",D=function(c){function e(e,t,i,r,o,n,a){c.call(this,t,i,r,o,n,a),this.zoomifyImage_=null,this.tileSize_=Object(l.d)(e.getTileSize(t[0]))}return c&&(e.__proto__=c),((e.prototype=Object.create(c&&c.prototype)).constructor=e).prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var e=c.prototype.getImage.call(this);if(this.state!=s.a.LOADED)return e;var t=this.tileSize_;if(e.width==t[0]&&e.height==t[1])return this.zoomifyImage_=e;var i=Object(u.a)(t[0],t[1]);return i.drawImage(e,0,0),this.zoomifyImage_=i.canvas,i.canvas},e}(a.a),p=function(w){function e(e){var t=e||{},i=t.size,r=void 0!==t.tierSizeCalculation?t.tierSizeCalculation:T,o=i[0],n=i[1],a=t.extent||[0,-i[1],i[0],0],p=[],c=t.tileSize||O.b,s=c;switch(r){case T:for(;s<o||s<n;)p.push([Math.ceil(o/s),Math.ceil(n/s)]),s+=s;break;case x:for(var u=o,l=n;s<u||s<l;)p.push([Math.ceil(u/s),Math.ceil(l/s)]),u>>=1,l>>=1;break;default:Object(I.a)(!1,53)}p.push([1,1]),p.reverse();for(var h=[1],f=[0],g=1,v=p.length;g<v;g++)h.push(1<<g),f.push(p[g-1][0]*p[g-1][1]+f[g-1]);h.reverse();var m=new S.a({tileSize:c,extent:a,origin:Object(j.C)(a),resolutions:h}),z=t.url;z&&-1==z.indexOf("{TileGroup}")&&-1==z.indexOf("{tileIndex}")&&(z+="{TileGroup}/{z}-{x}-{y}.jpg");var d=Object(_.c)(z);var y=Object(_.b)(d.map(function(l){return function(e,t,i){if(e){var r=e[0],o=e[1],n=-e[2]-1,a=o+n*p[r][0],c=m.getTileSize(r),s=Array.isArray(c)?c[0]:c,u={z:r,x:o,y:n,tileIndex:a,TileGroup:"TileGroup"+((a+f[r])/s|0)};return l.replace(/\{(\w+?)\}/g,function(e,t){return u[t]})}}})),b=D.bind(null,m);w.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:b,tileGrid:m,tileUrlFunction:y,transition:t.transition})}return w&&(e.__proto__=w),(e.prototype=Object.create(w&&w.prototype)).constructor=e}(c.a),h=9911,f=6100,g="http://vips.vtech.fr/cgi-bin/iipsrv.fcgi?zoomify=/mnt/MD1/AD00/plan_CHU-4HD-01/FOND.TIF/",v=new n.a({source:new p({url:g,size:[h,f],crossOrigin:"anonymous"})}),m=[0,-f,h,0];new r.a({layers:[v],target:"map",view:new o.a({resolutions:v.getSource().getTileGrid().getResolutions(),extent:m})}).getView().fit(m),document.getElementById("zoomifyProtocol").addEventListener("change",function(e){var t=e.currentTarget.value;"iip"===t?v.setSource(new p({url:"http://vips.vtech.fr/cgi-bin/iipsrv.fcgi?FIF=/mnt/MD1/AD00/plan_CHU-4HD-01/FOND.TIF&JTL={z},{tileIndex}",size:[h,f],crossOrigin:"anonymous"})):"zoomify"===t&&v.setSource(new p({url:g,size:[h,f],crossOrigin:"anonymous"}))})}},[[399,0]]]);
//# sourceMappingURL=zoomify.js.map