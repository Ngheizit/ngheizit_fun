{"version":3,"sources":["webpack:///./icon-sprite-webgl.js"],"names":["__webpack_require__","r","__webpack_exports__","i","_src_ol_Feature_js__WEBPACK_IMPORTED_MODULE_0__","_src_ol_WebGLMap_js__WEBPACK_IMPORTED_MODULE_1__","_src_ol_View_js__WEBPACK_IMPORTED_MODULE_2__","_src_ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_3__","_src_ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_4__","_src_ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_5__","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_6__","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_7__","iconInfo","offset","opacity","rotateWithView","rotation","scale","size","Math","PI","iconCount","length","icons","Array","const","info","crossOrigin","src","feature","geometry","features","e","random","setStyle","image","vectorSource","vector","source","map","layers","target","document","getElementById","view","center","zoom","overlayFeatures","clone","push","style","on","evt","innerHTML","window","setTimeout","forEachFeatureAtPixel","pixel","dragging","getEventPixel","originalEvent","hit","hasFeatureAtPixel","getTarget","cursor"],"mappings":"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","file":"icon-sprite-webgl.js","sourcesContent":["import Feature from '../src/ol/Feature.js';\nimport Map from '../src/ol/WebGLMap.js';\nimport View from '../src/ol/View.js';\nimport Point from '../src/ol/geom/Point.js';\nimport VectorLayer from '../src/ol/layer/Vector.js';\nimport VectorSource from '../src/ol/source/Vector.js';\nimport {Icon, Style} from '../src/ol/style.js';\n\n\nconst iconInfo = [{\n  offset: [0, 0],\n  opacity: 1.0,\n  rotateWithView: true,\n  rotation: 0.0,\n  scale: 1.0,\n  size: [55, 55]\n}, {\n  offset: [110, 86],\n  opacity: 0.75,\n  rotateWithView: false,\n  rotation: Math.PI / 2.0,\n  scale: 1.25,\n  size: [55, 55]\n}, {\n  offset: [55, 0],\n  opacity: 0.5,\n  rotateWithView: true,\n  rotation: Math.PI / 3.0,\n  scale: 1.5,\n  size: [55, 86]\n}, {\n  offset: [212, 0],\n  opacity: 1.0,\n  rotateWithView: true,\n  rotation: 0.0,\n  scale: 1.0,\n  size: [44, 44]\n}];\n\nlet i;\n\nconst iconCount = iconInfo.length;\nconst icons = new Array(iconCount);\nfor (i = 0; i < iconCount; ++i) {\n  const info = iconInfo[i];\n  icons[i] = new Icon({\n    offset: info.offset,\n    opacity: info.opacity,\n    rotateWithView: info.rotateWithView,\n    rotation: info.rotation,\n    scale: info.scale,\n    size: info.size,\n    crossOrigin: 'anonymous',\n    src: 'data/Butterfly.png'\n  });\n}\n\nconst featureCount = 50000;\nconst features = new Array(featureCount);\nlet feature, geometry;\nconst e = 25000000;\nfor (i = 0; i < featureCount; ++i) {\n  geometry = new Point(\n    [2 * e * Math.random() - e, 2 * e * Math.random() - e]);\n  feature = new Feature(geometry);\n  feature.setStyle(\n    new Style({\n      image: icons[i % (iconCount - 1)]\n    })\n  );\n  features[i] = feature;\n}\n\nconst vectorSource = new VectorSource({\n  features: features\n});\nconst vector = new VectorLayer({\n  source: vectorSource\n});\n\nconst map = new Map({\n  layers: [vector],\n  target: document.getElementById('map'),\n  view: new View({\n    center: [0, 0],\n    zoom: 5\n  })\n});\n\nconst overlayFeatures = [];\nfor (i = 0; i < featureCount; i += 30) {\n  const clone = features[i].clone();\n  clone.setStyle(null);\n  overlayFeatures.push(clone);\n}\n\nnew VectorLayer({\n  map: map,\n  source: new VectorSource({\n    features: overlayFeatures\n  }),\n  style: new Style({\n    image: icons[iconCount - 1]\n  })\n});\n\nmap.on('click', function(evt) {\n  const info = document.getElementById('info');\n  info.innerHTML =\n      'Hold on a second, while I catch those butterflies for you ...';\n\n  window.setTimeout(function() {\n    const features = [];\n    map.forEachFeatureAtPixel(evt.pixel, function(feature) {\n      features.push(feature);\n      return false;\n    });\n\n    if (features.length === 1) {\n      info.innerHTML = 'Got one butterfly';\n    } else if (features.length > 1) {\n      info.innerHTML = 'Got ' + features.length + ' butterflies';\n    } else {\n      info.innerHTML = 'Couldn\\'t catch a single butterfly';\n    }\n  }, 1);\n});\n\nmap.on('pointermove', function(evt) {\n  if (evt.dragging) {\n    return;\n  }\n  const pixel = map.getEventPixel(evt.originalEvent);\n  const hit = map.hasFeatureAtPixel(pixel);\n  map.getTarget().style.cursor = hit ? 'pointer' : '';\n});\n"],"sourceRoot":""}