{"version":3,"sources":["webpack:///./modify-test.js"],"names":["__webpack_require__","r","__webpack_exports__","styles","image","_src_ol_Map_js__WEBPACK_IMPORTED_MODULE_0__","_src_ol_View_js__WEBPACK_IMPORTED_MODULE_1__","_src_ol_format_GeoJSON_js__WEBPACK_IMPORTED_MODULE_2__","_src_ol_interaction_js__WEBPACK_IMPORTED_MODULE_3__","_src_ol_interaction_js__WEBPACK_IMPORTED_MODULE_4__","_src_ol_interaction_js__WEBPACK_IMPORTED_MODULE_5__","_src_ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_6__","_src_ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_7__","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_8__","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_9__","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_10__","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_11__","styleFunction","radius","fill","stroke","color","width","feature","getGeometry","getType","source","features","readFeatures","type","crs","properties","name","geometry","coordinates","geometries","layer","style","overlayStyle","zIndex","concat","select","modify","getFeatures","insertVertexCondition","getArray","every","match","interactions","Object","extend","layers","target","view","center","zoom"],"mappings":"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","file":"modify-test.js","sourcesContent":["import Map from '../src/ol/Map.js';\nimport View from '../src/ol/View.js';\nimport GeoJSON from '../src/ol/format/GeoJSON.js';\nimport {defaults as defaultInteractions, Modify, Select} from '../src/ol/interaction.js';\nimport VectorLayer from '../src/ol/layer/Vector.js';\nimport VectorSource from '../src/ol/source/Vector.js';\nimport {Circle as CircleStyle, Fill, Stroke, Style} from '../src/ol/style.js';\n\n\nconst styleFunction = (function() {\n  const styles = {};\n  const image = new CircleStyle({\n    radius: 5,\n    fill: null,\n    stroke: new Stroke({color: 'orange', width: 2})\n  });\n  styles['Point'] = new Style({image: image});\n  styles['Polygon'] = new Style({\n    stroke: new Stroke({\n      color: 'blue',\n      width: 3\n    }),\n    fill: new Fill({\n      color: 'rgba(0, 0, 255, 0.1)'\n    })\n  });\n  styles['MultiLineString'] = new Style({\n    stroke: new Stroke({\n      color: 'green',\n      width: 3\n    })\n  });\n  styles['MultiPolygon'] = new Style({\n    stroke: new Stroke({\n      color: 'yellow',\n      width: 1\n    }),\n    fill: new Fill({\n      color: 'rgba(255, 255, 0, 0.1)'\n    })\n  });\n  styles['default'] = new Style({\n    stroke: new Stroke({\n      color: 'red',\n      width: 3\n    }),\n    fill: new Fill({\n      color: 'rgba(255, 0, 0, 0.1)'\n    }),\n    image: image\n  });\n  return function(feature) {\n    return styles[feature.getGeometry().getType()] || styles['default'];\n  };\n})();\n\nconst geojsonObject = {\n  'type': 'FeatureCollection',\n  'crs': {\n    'type': 'name',\n    'properties': {\n      'name': 'EPSG:3857'\n    }\n  },\n  'features': [{\n    'type': 'Feature',\n    'geometry': {\n      'type': 'Point',\n      'coordinates': [0, 0]\n    }\n  }, {\n    'type': 'Feature',\n    'geometry': {\n      'type': 'MultiPoint',\n      'coordinates': [[-2e6, 0], [0, -2e6]]\n    }\n  }, {\n    'type': 'Feature',\n    'geometry': {\n      'type': 'LineString',\n      'coordinates': [[4e6, -2e6], [8e6, 2e6], [9e6, 2e6]]\n    }\n  }, {\n    'type': 'Feature',\n    'geometry': {\n      'type': 'LineString',\n      'coordinates': [[4e6, -2e6], [8e6, 2e6], [8e6, 3e6]]\n    }\n  }, {\n    'type': 'Feature',\n    'geometry': {\n      'type': 'Polygon',\n      'coordinates': [[[-5e6, -1e6], [-4e6, 1e6],\n        [-3e6, -1e6], [-5e6, -1e6]], [[-4.5e6, -0.5e6],\n        [-3.5e6, -0.5e6], [-4e6, 0.5e6], [-4.5e6, -0.5e6]]]\n    }\n  }, {\n    'type': 'Feature',\n    'geometry': {\n      'type': 'MultiLineString',\n      'coordinates': [\n        [[-1e6, -7.5e5], [-1e6, 7.5e5]],\n        [[-1e6, -7.5e5], [-1e6, 7.5e5], [-5e5, 0], [-1e6, -7.5e5]],\n        [[1e6, -7.5e5], [15e5, 0], [15e5, 0], [1e6, 7.5e5]],\n        [[-7.5e5, -1e6], [7.5e5, -1e6]],\n        [[-7.5e5, 1e6], [7.5e5, 1e6]]\n      ]\n    }\n  }, {\n    'type': 'Feature',\n    'geometry': {\n      'type': 'MultiPolygon',\n      'coordinates': [\n        [[[-5e6, 6e6], [-5e6, 8e6], [-3e6, 8e6],\n          [-3e6, 6e6], [-5e6, 6e6]]],\n        [[[-3e6, 6e6], [-2e6, 8e6], [0, 8e6],\n          [0, 6e6], [-3e6, 6e6]]],\n        [[[1e6, 6e6], [1e6, 8e6], [3e6, 8e6],\n          [3e6, 6e6], [1e6, 6e6]]]\n      ]\n    }\n  }, {\n    'type': 'Feature',\n    'geometry': {\n      'type': 'GeometryCollection',\n      'geometries': [{\n        'type': 'LineString',\n        'coordinates': [[-5e6, -5e6], [0, -5e6]]\n      }, {\n        'type': 'Point',\n        'coordinates': [4e6, -5e6]\n      }, {\n        'type': 'Polygon',\n        'coordinates': [\n          [[1e6, -6e6], [2e6, -4e6], [3e6, -6e6], [1e6, -6e6]]\n        ]\n      }]\n    }\n  }]\n};\n\nconst source = new VectorSource({\n  features: (new GeoJSON()).readFeatures(geojsonObject)\n});\n\nconst layer = new VectorLayer({\n  source: source,\n  style: styleFunction\n});\n\nconst overlayStyle = (function() {\n  const styles = {};\n  styles['Polygon'] = [\n    new Style({\n      fill: new Fill({\n        color: [255, 255, 255, 0.5]\n      })\n    }),\n    new Style({\n      stroke: new Stroke({\n        color: [255, 255, 255, 1],\n        width: 5\n      })\n    }),\n    new Style({\n      stroke: new Stroke({\n        color: [0, 153, 255, 1],\n        width: 3\n      })\n    })\n  ];\n  styles['MultiPolygon'] = styles['Polygon'];\n\n  styles['LineString'] = [\n    new Style({\n      stroke: new Stroke({\n        color: [255, 255, 255, 1],\n        width: 5\n      })\n    }),\n    new Style({\n      stroke: new Stroke({\n        color: [0, 153, 255, 1],\n        width: 3\n      })\n    })\n  ];\n  styles['MultiLineString'] = styles['LineString'];\n\n  styles['Point'] = [\n    new Style({\n      image: new CircleStyle({\n        radius: 7,\n        fill: new Fill({\n          color: [0, 153, 255, 1]\n        }),\n        stroke: new Stroke({\n          color: [255, 255, 255, 0.75],\n          width: 1.5\n        })\n      }),\n      zIndex: 100000\n    })\n  ];\n  styles['MultiPoint'] = styles['Point'];\n\n  styles['GeometryCollection'] = styles['Polygon'].concat(styles['Point']);\n\n  return function(feature) {\n    return styles[feature.getGeometry().getType()];\n  };\n})();\n\nconst select = new Select({\n  style: overlayStyle\n});\n\nconst modify = new Modify({\n  features: select.getFeatures(),\n  style: overlayStyle,\n  insertVertexCondition: function() {\n    // prevent new vertices to be added to the polygons\n    return !select.getFeatures().getArray().every(function(feature) {\n      return feature.getGeometry().getType().match(/Polygon/);\n    });\n  }\n});\n\nconst map = new Map({\n  interactions: defaultInteractions().extend([select, modify]),\n  layers: [layer],\n  target: 'map',\n  view: new View({\n    center: [0, 1000000],\n    zoom: 2\n  })\n});\n"],"sourceRoot":""}